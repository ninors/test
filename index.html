<!DOCTYPE html>
<html lang="fr">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Minuteur Pomodoro Trop StylÃ© ğŸ…âœ¨ (Auto)</title>
Â  Â Â 
Â  Â  <style>
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Arial', sans-serif;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  /* Fond stylÃ© et vibrant */
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #f06, #4a235a);Â 
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  background-color: rgba(255, 255, 255, 0.1);
Â  Â  Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  Â  Â  border-radius: 20px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  width: 90%;
Â  Â  Â  Â  Â  Â  max-width: 500px;
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(5px); /* Effet flou pour le style */
Â  Â  Â  Â  }

Â  Â  Â  Â  h1 {
Â  Â  Â  Â  Â  Â  color: #fff;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  font-size: 2em;
Â  Â  Â  Â  }

Â  Â  Â  Â  hr {
Â  Â  Â  Â  Â  Â  border: 0;
Â  Â  Â  Â  Â  Â  height: 1px;
Â  Â  Â  Â  Â  Â  background-image: linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0));
Â  Â  Â  Â  Â  Â  margin: 20px 0;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- Minuteur --- */
Â  Â  Â  Â  .timer-container {
Â  Â  Â  Â  Â  Â  margin: 30px 0;
Â  Â  Â  Â  }

Â  Â  Â  Â  #timer-display {
Â  Â  Â  Â  Â  Â  font-size: 5em; /* 72px */
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.3);
Â  Â  Â  Â  Â  Â  border-radius: 15px;
Â  Â  Â  Â  Â  Â  padding: 20px 30px;
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  letter-spacing: 5px;
Â  Â  Â  Â  Â  Â  transition: color 0.5s, background-color 0.5s;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- Boutons de ContrÃ´le --- */
Â  Â  Â  Â  button {
Â  Â  Â  Â  Â  Â  background-color: #ffc107; /* Jaune standard */
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  padding: 12px 25px;
Â  Â  Â  Â  Â  Â  margin: 5px;
Â  Â  Â  Â  Â  Â  border-radius: 50px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  font-size: 1em;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  transition: background-color 0.3s, transform 0.1s, box-shadow 0.3s;
Â  Â  Â  Â  }

Â  Â  Â  Â  button:hover {
Â  Â  Â  Â  Â  Â  background-color: #ffeb3b;
Â  Â  Â  Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  Â  Â  Â  box-shadow: 0 5px 15px rgba(255, 193, 7, 0.4);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Styles spÃ©cifiques aux boutons de mode */
Â  Â  Â  Â  .mode-selector button {
Â  Â  Â  Â  Â  Â  background-color: rgba(255, 255, 255, 0.2);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  margin: 5px;
Â  Â  Â  Â  Â  Â  padding: 10px 20px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  font-weight: normal;
Â  Â  Â  Â  }

Â  Â  Â  Â  .mode-selector button.active {
Â  Â  Â  Â  Â  Â  background-color: #f06; /* Couleur active Pomodoro */
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 15px rgba(255, 0, 102, 0.8);
Â  Â  Â  Â  Â  Â  transform: scale(1.05);
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* --- Configuration & RÃ©compenses --- */
Â  Â  Â  Â  .settings input, .settings label {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  margin: 10px auto;
Â  Â  Â  Â  }
Â  Â  Â  Â  .settings label {
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  Â  Â  margin-top: 15px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .settings input {
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  background-color: rgba(255, 255, 255, 0.2);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  width: calc(100% - 20px);
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  font-size: 1em;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .settings #save-settings {
Â  Â  Â  Â  Â  Â  background-color: #28a745;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  }

        /* Style pour le nouveau bouton Auto-Start */
        .settings #toggle-auto-start {
            background-color: #17a2b8; /* Cyan */
            color: white;
            margin-top: 10px;
            width: 100%;
        }
        .settings #toggle-auto-start.active {
            background-color: #20c997; /* Vert clair */
        }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .rewards-section {
Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.2);
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  #rewards-list {
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  Â  Â  margin-top: 15px;
Â  Â  Â  Â  Â  Â  max-height: 200px;
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  }

Â  Â  Â  Â  .reward-item {
Â  Â  Â  Â  Â  Â  font-size: 1.2em;
Â  Â  Â  Â  Â  Â  margin: 8px 0;
Â  Â  Â  Â  Â  Â  padding: 5px;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
Â  Â  Â  Â  Â  Â  animation: fadeIn 0.5s ease-out;
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes fadeIn {
Â  Â  Â  Â  Â  Â  from { opacity: 0; transform: translateY(10px); }
Â  Â  Â  Â  Â  Â  to { opacity: 1; transform: translateY(0); }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Responsive */
Â  Â  Â  Â  @media (max-width: 600px) {
Â  Â  Â  Â  Â  Â  #timer-display {
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 4em;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  button {
Â  Â  Â  Â  Â  Â  Â  Â  padding: 10px 15px;
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 0.9em;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

Â  Â  <div class="container">
Â  Â  Â  Â  <h1>Minuteur Pomodoro StylÃ© ğŸš€</h1>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="settings">
Â  Â  Â  Â  Â  Â  <label for="pomodoro-time">Pomodoro (min) :</label>
Â  Â  Â  Â  Â  Â  <input type="number" id="pomodoro-time" value="25" min="1">
Â  Â  Â  Â  Â  Â  <label for="short-break-time">Pause Courte (min) :</label>
Â  Â  Â  Â  Â  Â  <input type="number" id="short-break-time" value="5" min="1">
Â  Â  Â  Â  Â  Â  <label for="long-break-time">Pause Longue (min) :</label>
Â  Â  Â  Â  Â  Â  <input type="number" id="long-break-time" value="15" min="1">
Â  Â  Â  Â  Â  Â  <button id="save-settings">ğŸ’¾ Sauvegarder les Temps</button>
            <button id="toggle-auto-start" class="active">ğŸ” Auto-EnchaÃ®nement : ON</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <hr>

Â  Â  Â  Â  <div class="mode-selector">
Â  Â  Â  Â  Â  Â  <button id="mode-pomodoro" class="active">ğŸ… Pomodoro</button>
Â  Â  Â  Â  Â  Â  <button id="mode-short-break">â˜• Pause Courte</button>
Â  Â  Â  Â  Â  Â  <button id="mode-long-break">ğŸ–ï¸ Pause Longue</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="timer-container">
Â  Â  Â  Â  Â  Â  <div id="timer-display">25:00</div>
Â  Â  Â  Â  Â  Â  <div class="controls">
Â  Â  Â  Â  Â  Â  Â  Â  <button id="start-btn">â–¶ï¸ DÃ©marrer</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="pause-btn" style="display:none;">â¸ï¸ Pause</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="reset-btn">ğŸ”„ RÃ©initialiser</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <p id="session-counter">Pomodoros TerminÃ©s : 0</p>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <hr>

Â  Â  Â  Â  <div class="rewards-section">
Â  Â  Â  Â  Â  Â  <h2>ğŸ† Mes RÃ©compenses StylÃ©es</h2>
Â  Â  Â  Â  Â  Â  <div id="rewards-list">
Â  Â  Â  Â  Â  Â  Â  Â  <p>Chargement des rÃ©compenses...</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  Â  Â  Â  // --- Ã‰lÃ©ments du DOM ---
Â  Â  Â  Â  Â  Â  const timerDisplay = document.getElementById('timer-display');
Â  Â  Â  Â  Â  Â  const startBtn = document.getElementById('start-btn');
Â  Â  Â  Â  Â  Â  const pauseBtn = document.getElementById('pause-btn');
Â  Â  Â  Â  Â  Â  const sessionCounter = document.getElementById('session-counter');
Â  Â  Â  Â  Â  Â  const rewardsList = document.getElementById('rewards-list');
Â  Â  Â  Â  Â  Â  const saveSettingsBtn = document.getElementById('save-settings');
            const toggleAutoStartBtn = document.getElementById('toggle-auto-start'); // NOUVEAU
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Modes
Â  Â  Â  Â  Â  Â  const modePomodoro = document.getElementById('mode-pomodoro');
Â  Â  Â  Â  Â  Â  const modeShortBreak = document.getElementById('mode-short-break');
Â  Â  Â  Â  Â  Â  const modeLongBreak = document.getElementById('mode-long-break');

Â  Â  Â  Â  Â  Â  // --- Variables d'Ã‰tat ---
Â  Â  Â  Â  Â  Â  let intervalId = null;
Â  Â  Â  Â  Â  Â  let totalSeconds = 0;
Â  Â  Â  Â  Â  Â  let isPaused = true;
Â  Â  Â  Â  Â  Â  let currentMode = 'pomodoro';
Â  Â  Â  Â  Â  Â  let pomodoroCount = 0;
            let autoStartEnabled = true; // NOUVEAU : ActivÃ© par dÃ©faut
            
Â  Â  Â  Â  Â  Â  // DÃ©finitions des temps
Â  Â  Â  Â  Â  Â  let times = {
Â  Â  Â  Â  Â  Â  Â  Â  pomodoro: 25,
Â  Â  Â  Â  Â  Â  Â  Â  shortBreak: 5,
Â  Â  Â  Â  Â  Â  Â  Â  longBreak: 15
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  // Liste des rÃ©compenses progressives
Â  Â  Â  Â  Â  Â  const allRewards = [
Â  Â  Â  Â  Â  Â  Â  Â  { emoji: 'ğŸŒŸ', desc: 'Premier pas (Simple) !', required: 1 },
Â  Â  Â  Â  Â  Â  Â  Â  { emoji: 'ğŸ’¡', desc: 'Concentration active !', required: 3 },
Â  Â  Â  Â  Â  Â  Â  Â  { emoji: 'ğŸ”¥', desc: 'En feu !', required: 5 },
Â  Â  Â  Â  Â  Â  Â  Â  { emoji: 'ğŸ¦¾', desc: 'Robot de productivitÃ© (Difficile)', required: 8 },
Â  Â  Â  Â  Â  Â  Â  Â  { emoji: 'ğŸ‘‘', desc: 'MaÃ®tre du temps', required: 12 },
Â  Â  Â  Â  Â  Â  Â  Â  { emoji: 'ğŸ’', desc: 'ProductivitÃ© Diamant (TrÃ¨s Difficile)', required: 16 },
Â  Â  Â  Â  Â  Â  Â  Â  { emoji: 'ğŸŒŒ', desc: 'Vitesse de la lumiÃ¨re', required: 20 },
Â  Â  Â  Â  Â  Â  ];
Â  Â  Â  Â  Â  Â  let obtainedRewards = [];

Â  Â  Â  Â  Â  Â  // --- Fonctions de LocalStorage ---

Â  Â  Â  Â  Â  Â  function loadState() {
Â  Â  Â  Â  Â  Â  Â  Â  // Charger les autres Ã©tats... (inchangÃ©)

                // NOUVEAU: Charger l'Ã©tat de l'auto-start
                const savedAutoStart = localStorage.getItem('autoStartEnabled');
                if (savedAutoStart !== null) {
                    autoStartEnabled = savedAutoStart === 'true';
                    updateAutoStartButton();
                }

                const savedCount = localStorage.getItem('pomodoroCount');
                if (savedCount) {
                    pomodoroCount = parseInt(savedCount, 10);
                    sessionCounter.textContent = `Pomodoros TerminÃ©s : ${pomodoroCount}`;
                }
                
                const savedRewards = localStorage.getItem('obtainedRewards');
                if (savedRewards) {
                    obtainedRewards = JSON.parse(savedRewards);
                    renderRewards();
                } else {
                    rewardsList.innerHTML = '<p>Aucune rÃ©compense pour le moment. Travaille bien !</p>';
                }

                const savedTimes = localStorage.getItem('pomodoroTimes');
                if (savedTimes) {
                    times = JSON.parse(savedTimes);
                    document.getElementById('pomodoro-time').value = times.pomodoro;
                    document.getElementById('short-break-time').value = times.shortBreak;
                    document.getElementById('long-break-time').value = times.longBreak;
                }

Â  Â  Â  Â  Â  Â  Â  Â  setTimer(currentMode, times[currentMode]);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function saveState() {
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('pomodoroCount', pomodoroCount);
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('obtainedRewards', JSON.stringify(obtainedRewards));
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('pomodoroTimes', JSON.stringify(times));
                localStorage.setItem('autoStartEnabled', autoStartEnabled); // NOUVEAU
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // --- Fonctions du Minuteur ---
            
            // MODIFIÃ‰ : Ajout du dÃ©marage auto si l'option est active
Â  Â  Â  Â  Â  Â  function switchToMode(mode, autoStart = false) {
Â  Â  Â  Â  Â  Â  Â  Â  if (intervalId) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  clearInterval(intervalId);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  intervalId = null;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  setTimer(mode, times[mode]);
Â  Â  Â  Â  Â  Â  Â  Â  isPaused = true;
Â  Â  Â  Â  Â  Â  Â  Â  startBtn.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  pauseBtn.style.display = 'none';

                if (autoStart && autoStartEnabled) { // DÃ©marrage automatique ici
                    // On donne un petit dÃ©lai pour l'alerte
                    setTimeout(startTimer, 100); 
                }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // MODIFIÃ‰ : La fonction tick est le point central de l'auto-enchaÃ®nement
Â  Â  Â  Â  Â  Â  function tick() {
Â  Â  Â  Â  Â  Â  Â  Â  if (totalSeconds <= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  clearInterval(intervalId);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  intervalId = null;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isPaused = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let nextMode;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let alertMessage;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (currentMode === 'pomodoro') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pomodoroCount++;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sessionCounter.textContent = `Pomodoros TerminÃ©s : ${pomodoroCount}`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  saveState();Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  checkReward(pomodoroCount);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMode = (pomodoroCount % 4 === 0) ? 'longBreak' : 'shortBreak';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertMessage = `Pomodoro terminÃ© ! ğŸ¥³ C'est l'heure de la PAUSE â˜• !`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMode = 'pomodoro';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertMessage = `Pause terminÃ©e ! ğŸ¦¾ Retour au TRAVAIL ğŸ… !`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
                    alert(alertMessage);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
                    // LE CHANGEMENT CLÃ‰ : On passe au mode suivant et on demande l'auto-start
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  switchToMode(nextMode, true); 

Â  Â  Â  Â  Â  Â  Â  Â  } else if (!isPaused) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  totalSeconds--;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateDisplay();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

            // NOUVELLE FONCTION pour le bouton Auto-Start
            function toggleAutoStart() {
                autoStartEnabled = !autoStartEnabled;
                saveState();
                updateAutoStartButton();
                alert(`Auto-EnchaÃ®nement : ${autoStartEnabled ? 'ACTIVÃ‰' : 'DÃ‰SACTIVÃ‰'}`);
            }

            function updateAutoStartButton() {
                toggleAutoStartBtn.textContent = `ğŸ” Auto-EnchaÃ®nement : ${autoStartEnabled ? 'ON' : 'OFF'}`;
                if (autoStartEnabled) {
                    toggleAutoStartBtn.classList.add('active');
                } else {
                    toggleAutoStartBtn.classList.remove('active');
                }
            }
            
            // --- Fonctions inchangÃ©es (updateDisplay, startTimer, pauseTimer, resetTimer, updateModeButtons, checkReward, renderRewards) ---
            // ... (coller ici les autres fonctions non modifiÃ©es si besoin de voir le code complet, mais les principales modifications sont faites ci-dessus)
            
            function updateDisplay() {
Â  Â  Â  Â  Â  Â  Â  Â  const minutes = Math.floor(totalSeconds / 60);
Â  Â  Â  Â  Â  Â  Â  Â  const seconds = totalSeconds % 60;
Â  Â  Â  Â  Â  Â  Â  Â  timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function setTimer(mode, minutes) {
Â  Â  Â  Â  Â  Â  Â  Â  currentMode = mode;
Â  Â  Â  Â  Â  Â  Â  Â  totalSeconds = minutes * 60;
Â  Â  Â  Â  Â  Â  Â  Â  updateDisplay();
Â  Â  Â  Â  Â  Â  Â  Â  updateModeButtons(mode);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function startTimer() {
Â  Â  Â  Â  Â  Â  Â  Â  if (!intervalId || isPaused) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isPaused = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!intervalId) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  intervalId = setInterval(tick, 1000);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  startBtn.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pauseBtn.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function pauseTimer() {
Â  Â  Â  Â  Â  Â  Â  Â  isPaused = true;
Â  Â  Â  Â  Â  Â  Â  Â  startBtn.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  pauseBtn.style.display = 'none';
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function resetTimer() {
Â  Â  Â  Â  Â  Â  Â  Â  clearInterval(intervalId);
Â  Â  Â  Â  Â  Â  Â  Â  intervalId = null;
Â  Â  Â  Â  Â  Â  Â  Â  isPaused = true;
Â  Â  Â  Â  Â  Â  Â  Â  setTimer(currentMode, times[currentMode]);
Â  Â  Â  Â  Â  Â  Â  Â  startBtn.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  pauseBtn.style.display = 'none';
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function updateModeButtons(activeMode) {
Â  Â  Â  Â  Â  Â  Â  Â  modePomodoro.classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  Â  modeShortBreak.classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  Â  modeLongBreak.classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (activeMode === 'pomodoro') modePomodoro.classList.add('active');
Â  Â  Â  Â  Â  Â  Â  Â  if (activeMode === 'shortBreak') modeShortBreak.classList.add('active');
Â  Â  Â  Â  Â  Â  Â  Â  if (activeMode === 'longBreak') modeLongBreak.classList.add('active');
Â  Â  Â  Â  Â  Â  }

            function checkReward(count) {
Â  Â  Â  Â  Â  Â  Â  Â  const newReward = allRewards.find(r => r.required === count);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (newReward && !obtainedRewards.some(r => r.required === newReward.required)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  obtainedRewards.push(newReward);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  saveState();Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderRewards();Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert(`FÃ©licitations ! Nouvelle rÃ©compense dÃ©bloquÃ©e : ${newReward.emoji} ${newReward.desc}`);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function renderRewards() {
Â  Â  Â  Â  Â  Â  Â  Â  rewardsList.innerHTML = '';Â 
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (obtainedRewards.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rewardsList.innerHTML = '<p>Aucune rÃ©compense pour le moment. Travaille bien !</p>';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  const sortedRewards = [...obtainedRewards].sort((a, b) => b.required - a.required);

Â  Â  Â  Â  Â  Â  Â  Â  sortedRewards.forEach(reward => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const rewardItem = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rewardItem.className = 'reward-item';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rewardItem.innerHTML = `${reward.emoji} **${reward.desc}** (${reward.required} Pomodoros)`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rewardsList.appendChild(rewardItem);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
            // --- Fin des fonctions inchangÃ©es ---


Â  Â  Â  Â  Â  Â  // --- Gestionnaires d'Ã‰vÃ©nements ---
Â  Â  Â  Â  Â  Â  startBtn.addEventListener('click', startTimer);
Â  Â  Â  Â  Â  Â  pauseBtn.addEventListener('click', pauseTimer);
Â  Â  Â  Â  Â  Â  document.getElementById('reset-btn').addEventListener('click', resetTimer);

Â  Â  Â  Â  Â  Â  modePomodoro.addEventListener('click', () => switchToMode('pomodoro'));
Â  Â  Â  Â  Â  Â  modeShortBreak.addEventListener('click', () => switchToMode('shortBreak'));
Â  Â  Â  Â  Â  Â  modeLongBreak.addEventListener('click', () => switchToMode('longBreak'));

            toggleAutoStartBtn.addEventListener('click', toggleAutoStart); // NOUVEAU

Â  Â  Â  Â  Â  Â  saveSettingsBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  const pTime = parseInt(document.getElementById('pomodoro-time').value, 10);
Â  Â  Â  Â  Â  Â  Â  Â  const sTime = parseInt(document.getElementById('short-break-time').value, 10);
Â  Â  Â  Â  Â  Â  Â  Â  const lTime = parseInt(document.getElementById('long-break-time').value, 10);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (pTime > 0 && sTime > 0 && lTime > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  times.pomodoro = pTime;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  times.shortBreak = sTime;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  times.longBreak = lTime;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  saveState();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!intervalId) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimer(currentMode, times[currentMode]);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert('Temps sauvegardÃ©s !');
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert('Veuillez entrer des valeurs valides pour les temps (supÃ©rieures Ã  0).');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // --- Initialisation ---
Â  Â  Â  Â  Â  Â  loadState();
Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>
